<!DOCTYPE html><html><head>
      <title>index</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="object-pool-padrão-criacional">Object Pool (Padrão Criacional) </h1>
<h2 id="intenção">Intenção </h2>
<p>Gerenciar a criação, armazenamento, emprestimo, retomada e reutilização de instancias de objeto, com o objetivo de controlar a quantidade de instancias existentes ou previnir o processo de criação e destruição recorentes quando estes forem considerados caros.</p>
<h2 id="também-conhecido-como">Também conhecido como </h2>
<p>Pool de recursos</p>
<h2 id="motivação">Motivação </h2>
<p>Para se comunicar com um banco de dados, é necessario estabelecer uma "conexão" com ele:</p>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code><span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>
                <span class="token string">"jdbc:mysql://localhost:3306/meu_banco"</span><span class="token punctuation">,</span>
                <span class="token string">"usuario"</span><span class="token punctuation">,</span>
                <span class="token string">"senha"</span> <span class="token punctuation">)</span>

<span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">"SELECT id, nome FROM clientes"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Em uma aplicação como um sistema web, onde varias requisições chegam o tempo todo, e para cada requisição é comum termos que acessar o banco de dados uma ou mais vezes, nesse caso, para cada acesso precisariamos instanciar a conexão.</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="SEQUENCE" height="382px" preserveAspectRatio="none" style="width:360px;height:382px;background:#FFFFFF;" version="1.1" viewBox="0 0 360 382" width="360px" zoomAndPan="magnify"><defs></defs><g><g><title>Client</title><rect fill="#FFFFFF" fill-opacity="0.00000" height="220.7969" width="8" x="24.2651" y="81.2969"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="28" x2="28" y1="81.2969" y2="302.0938"></line></g><g><title>Web Server</title><rect fill="#FFFFFF" fill-opacity="0.00000" height="220.7969" width="8" x="148.9136" y="81.2969"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="152.062" x2="152.062" y1="81.2969" y2="302.0938"></line></g><g><title>Database</title><rect fill="#FFFFFF" fill-opacity="0.00000" height="220.7969" width="8" x="310.522" y="81.2969"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="314.1216" x2="314.1216" y1="81.2969" y2="302.0938"></line></g><g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="5" y="77.9951">Client</text><ellipse cx="28.2651" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"></ellipse><path d="M28.2651,21.5 L28.2651,48.5 M15.2651,29.5 L41.2651,29.5 M28.2651,48.5 L15.2651,63.5 M28.2651,48.5 L41.2651,63.5 " fill="#FFFFFF" fill-opacity="0.00000" style="stroke:#181818;stroke-width:0.5;"></path></g><g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="5" y="314.0889">Client</text><ellipse cx="28.2651" cy="325.8906" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"></ellipse><path d="M28.2651,333.8906 L28.2651,360.8906 M15.2651,341.8906 L41.2651,341.8906 M28.2651,360.8906 L15.2651,375.8906 M28.2651,360.8906 L41.2651,375.8906 " fill="#FFFFFF" fill-opacity="0.00000" style="stroke:#181818;stroke-width:0.5;"></path></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.7031" x="105.062" y="50"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.7031" x="112.062" y="69.9951">Web Server</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.7031" x="105.062" y="301.0938"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.7031" x="112.062" y="321.0889">Web Server</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8008" x="274.1216" y="50"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="281.1216" y="69.9951">Database</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8008" x="274.1216" y="301.0938"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="281.1216" y="321.0889">Database</text></g><g><polygon fill="#181818" points="140.9136,108.4297,150.9136,112.4297,140.9136,116.4297,144.9136,112.4297" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="28.2651" x2="146.9136" y1="112.4297" y2="112.4297"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.019" x="35.2651" y="107.3638">HTTP Request</text></g><g><line style="stroke:#181818;stroke-width:1;" x1="152.9136" x2="194.9136" y1="141.5625" y2="141.5625"></line><line style="stroke:#181818;stroke-width:1;" x1="194.9136" x2="194.9136" y1="141.5625" y2="154.5625"></line><line style="stroke:#181818;stroke-width:1;" x1="153.9136" x2="194.9136" y1="154.5625" y2="154.5625"></line><polygon fill="#181818" points="163.9136,150.5625,153.9136,154.5625,163.9136,158.5625,159.9136,154.5625" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.6084" x="159.9136" y="136.4966">Instantiate Connection</text></g><g><polygon fill="#181818" points="302.522,179.6953,312.522,183.6953,302.522,187.6953,306.522,183.6953" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="152.9136" x2="308.522" y1="183.6953" y2="183.6953"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.6802" x="159.9136" y="178.6294">Query Data</text></g><g><polygon fill="#181818" points="163.9136,208.8281,153.9136,212.8281,163.9136,216.8281,159.9136,212.8281" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="157.9136" x2="313.522" y1="212.8281" y2="212.8281"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.1235" x="169.9136" y="207.7622">Return Data</text></g><g><line style="stroke:#181818;stroke-width:1;" x1="152.9136" x2="194.9136" y1="241.9609" y2="241.9609"></line><line style="stroke:#181818;stroke-width:1;" x1="194.9136" x2="194.9136" y1="241.9609" y2="254.9609"></line><line style="stroke:#181818;stroke-width:1;" x1="153.9136" x2="194.9136" y1="254.9609" y2="254.9609"></line><polygon fill="#181818" points="163.9136,250.9609,153.9136,254.9609,163.9136,258.9609,159.9136,254.9609" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.5591" x="159.9136" y="236.895">Destroy Connection</text></g><g><polygon fill="#181818" points="39.2651,280.0938,29.2651,284.0938,39.2651,288.0938,35.2651,284.0938" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="33.2651" x2="151.9136" y1="284.0938" y2="284.0938"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.6484" x="45.2651" y="279.0278">HTTP Response</text></g><!--SRC=[ROun3i8m34NtdCBgtWjqO4Wpm0Qb4hDRUOY4d68xbNfx2gbG4MoM__Fpnz6IG7kFnEOc58jZd90DgXiDS2MPIIf0tSPl9A3XW4fl87ZdYWVgmuOtSEpxCtJqoAJcod8VdrXjLKKqWZOnqsWnyGuCle5B9bdWzSm53_Nkl2FBmYNwbOVrfwJbdtYbIjTFGvqIApq1]--></g></svg></p><p><img src="./images/FluxoSemPool.png" alt="FluxoSemPool"></p>
<p>Isso rapidamente apresenta um problema, estabelecer uma conexão com banco de dados é um processo relativamente caro e demorado, é necessario a realização de diversas etapas tanto no servidor de banco quanto no cliente que está se conectando. Além disso, servidores de banco de dados possuem um numero maximo de conexões simultaneas que ele pode manter.</p>
<p>Em um cenario em que por exemplo uma aplicação receba 1000 requisições/s, e para cada requisição sejam necessarias em media 2 consultas ao banco de dados, isso significa que estariamos instanciando e destruindo 2000 conexões por segundo, um numero que facilmente extrapolaria o limite de conexões de um banco de dados.</p>
<p>Em vez disso, usando o pattern de object pool, podemos implementar uma classe que sirva como pool de conexões, dessa forma, ao precisarmos de uma conexão solicitamos ao pool, que ira nos fornecer uma conexão já existente que foi inicializada com o pool. Ao terminamos de usar a conexão, devolvemos ela ao pool.</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="SEQUENCE" height="444px" preserveAspectRatio="none" style="width:566px;height:444px;background:#FFFFFF;" version="1.1" viewBox="0 0 566 444" width="566px" zoomAndPan="magnify"><defs></defs><g><g><title>Client</title><rect fill="#FFFFFF" fill-opacity="0.00000" height="282.1953" width="8" x="24.2651" y="81.2969"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="28" x2="28" y1="81.2969" y2="363.4922"></line></g><g><title>Web Server Endpoint</title><rect fill="#FFFFFF" fill-opacity="0.00000" height="282.1953" width="8" x="148.9136" y="81.2969"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="152.6821" x2="152.6821" y1="81.2969" y2="363.4922"></line></g><g><title>Connection Pool</title><rect fill="#FFFFFF" fill-opacity="0.00000" height="282.1953" width="8" x="303.9927" y="81.2969"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="307.4287" x2="307.4287" y1="81.2969" y2="363.4922"></line></g><g><title>Database</title><rect fill="#FFFFFF" fill-opacity="0.00000" height="282.1953" width="8" x="516.4482" y="81.2969"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="520.0479" x2="520.0479" y1="81.2969" y2="363.4922"></line></g><g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="5" y="77.9951">Client</text><ellipse cx="28.2651" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"></ellipse><path d="M28.2651,21.5 L28.2651,48.5 M15.2651,29.5 L41.2651,29.5 M28.2651,48.5 L15.2651,63.5 M28.2651,48.5 L41.2651,63.5 " fill="#FFFFFF" fill-opacity="0.00000" style="stroke:#181818;stroke-width:0.5;"></path></g><g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="5" y="375.4873">Client</text><ellipse cx="28.2651" cy="387.2891" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"></ellipse><path d="M28.2651,395.2891 L28.2651,422.2891 M15.2651,403.2891 L41.2651,403.2891 M28.2651,422.2891 L15.2651,437.2891 M28.2651,422.2891 L41.2651,437.2891 " fill="#FFFFFF" fill-opacity="0.00000" style="stroke:#181818;stroke-width:0.5;"></path></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162.4629" x="71.6821" y="50"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148.4629" x="78.6821" y="69.9951">Web Server Endpoint</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162.4629" x="71.6821" y="362.4922"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148.4629" x="78.6821" y="382.4873">Web Server Endpoint</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127.1279" x="244.4287" y="50"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113.1279" x="251.4287" y="69.9951">Connection Pool</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127.1279" x="244.4287" y="362.4922"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113.1279" x="251.4287" y="382.4873">Connection Pool</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8008" x="480.0479" y="50"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="487.0479" y="69.9951">Database</text></g><g><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8008" x="480.0479" y="362.4922"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="487.0479" y="382.4873">Database</text></g><g><polygon fill="#181818" points="508.4482,108.4297,518.4482,112.4297,508.4482,116.4297,512.4482,112.4297" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="307.9927" x2="514.4482" y1="112.4297" y2="112.4297"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188.4556" x="314.9927" y="107.3638">Connection Pool Initialization</text></g><g><polygon fill="#181818" points="318.9927,137.5625,308.9927,141.5625,318.9927,145.5625,314.9927,141.5625" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="312.9927" x2="519.4482" y1="141.5625" y2="141.5625"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.7563" x="324.9927" y="136.4966">Connection Instances</text></g><g><polygon fill="#181818" points="140.9136,166.6953,150.9136,170.6953,140.9136,174.6953,144.9136,170.6953" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="28.2651" x2="146.9136" y1="170.6953" y2="170.6953"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.019" x="35.2651" y="165.6294">HTTP Request</text></g><g><polygon fill="#181818" points="295.9927,195.8281,305.9927,199.8281,295.9927,203.8281,299.9927,199.8281" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="152.9136" x2="301.9927" y1="199.8281" y2="199.8281"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.0791" x="159.9136" y="194.7622">Request Connection</text></g><g><polygon fill="#181818" points="163.9136,224.9609,153.9136,228.9609,163.9136,232.9609,159.9136,228.9609" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="157.9136" x2="306.9927" y1="228.9609" y2="228.9609"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.3818" x="169.9136" y="223.895">Provide Connection</text></g><g><polygon fill="#181818" points="508.4482,254.0938,518.4482,258.0938,508.4482,262.0938,512.4482,258.0938" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="152.9136" x2="514.4482" y1="258.0938" y2="258.0938"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.6802" x="159.9136" y="253.0278">Query Data</text></g><g><polygon fill="#181818" points="163.9136,283.2266,153.9136,287.2266,163.9136,291.2266,159.9136,287.2266" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="157.9136" x2="519.4482" y1="287.2266" y2="287.2266"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.1235" x="169.9136" y="282.1606">Return Data</text></g><g><polygon fill="#181818" points="295.9927,312.3594,305.9927,316.3594,295.9927,320.3594,299.9927,316.3594" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;" x1="152.9136" x2="301.9927" y1="316.3594" y2="316.3594"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.6401" x="159.9136" y="311.2935">Return Connection</text></g><g><polygon fill="#181818" points="39.2651,341.4922,29.2651,345.4922,39.2651,349.4922,35.2651,345.4922" style="stroke:#181818;stroke-width:1;"></polygon><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="33.2651" x2="151.9136" y1="345.4922" y2="345.4922"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.6484" x="45.2651" y="340.4263">HTTP Response</text></g><!--SRC=[RO-z3i8m38JtF8N5tXTWO80YmLP-96OtUB1KEILnAy7JqxHfQO7DkljokKEhpiEkOX8rDNfbopMAmkf69Lp8j-HXB_VQiUWAC2HjoUwS25bb9r0uL_LSF9PKZeeb1khjV6jCH23RTFSQlYBWAAoC5RymQYRVGjQHqLgmHmcAOYcOOKEC6ngkuN2z5d2cHqD1JPeoPIHzbfNgp08Axrg-qvpvnCJIfuRy4-AkiU3uz4pQU1citwzxxqzgXmmpflAXTXBe3G00]--></g></svg></p><p><img src="./images/FluxoComPool.png" alt="FluxoSemPool"></p>
<h2 id="aplicabilidade">Aplicabilidade </h2>
<p>Use object pool quando:</p>
<ul>
<li>
<p>For <strong>demorado</strong> criar uma instancia</p>
</li>
<li>
<p>For <strong>caro</strong> em recursos criar uma instancia</p>
</li>
<li>
<p>For <strong>demorado</strong> destruir uma instancia</p>
</li>
<li>
<p>For <strong>caro</strong> em recursos destruir uma instancia</p>
</li>
<li>
<p>Existe um <strong>limite</strong> de quantas instancias possam existir simultaneamente</p>
</li>
</ul>
<p>Com <strong>recursos</strong>, queremos dizer por exemplo cpu, ram, disco e rede por exemplo</p>
<p>Não use object pool quando:</p>
<ul>
<li>O <strong>custo</strong> de <strong>manter</strong> a instancia, mesmo quando não está sendo usada, supera o custo de instanciala.</li>
</ul>
<h2 id="estrutura">Estrutura </h2>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="CLASS" height="201px" preserveAspectRatio="none" style="width:1229px;height:201px;background:#FFFFFF;" version="1.1" viewBox="0 0 1229 201" width="1229px" zoomAndPan="magnify"><defs></defs><g><!--class PoolInterface--><g id="elem_PoolInterface"><rect codeline="2" fill="#F1F1F1" height="80.5938" id="PoolInterface" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172.6719" x="407.03" y="105.85"></rect><ellipse cx="443.8686" cy="121.85" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M439.7905,117.6156 L439.7905,115.4594 L447.1811,115.4594 L447.1811,117.6156 L444.7124,117.6156 L444.7124,125.6938 L447.1811,125.6938 L447.1811,127.85 L439.7905,127.85 L439.7905,125.6938 L442.2592,125.6938 L442.2592,117.6156 L439.7905,117.6156 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="92.1416" x="462.7217" y="126.6967">PoolInterface</text><line style="stroke:#181818;stroke-width:0.5;" x1="408.03" x2="578.7019" y1="137.85" y2="137.85"></line><line style="stroke:#181818;stroke-width:0.5;" x1="408.03" x2="578.7019" y1="145.85" y2="145.85"></line><ellipse cx="418.03" cy="159.4984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.9814" x="427.03" y="162.8451">acquire(): Object</text><ellipse cx="418.03" cy="175.7953" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146.6719" x="427.03" y="179.142">release(Object): void</text></g><!--class PooledObjectFactoryInterface--><g id="elem_PooledObjectFactoryInterface"><rect codeline="7" fill="#F1F1F1" height="64.2969" id="PooledObjectFactoryInterface" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="239.6621" x="7" y="7"></rect><ellipse cx="22" cy="23" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M17.9219,18.7656 L17.9219,16.6094 L25.3125,16.6094 L25.3125,18.7656 L22.8438,18.7656 L22.8438,26.8438 L25.3125,26.8438 L25.3125,29 L17.9219,29 L17.9219,26.8438 L20.3906,26.8438 L20.3906,18.7656 L17.9219,18.7656 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="207.6621" x="36" y="27.8467">PooledObjectFactoryInterface</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="245.6621" y1="39" y2="39"></line><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="245.6621" y1="47" y2="47"></line><ellipse cx="18" cy="60.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156.0303" x="27" y="63.9951">createObject(): Object</text></g><!--class PoolConcrete--><g id="elem_PoolConcrete"><rect codeline="11" fill="#F1F1F1" height="96.8906" id="PoolConcrete" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="287.4131" x="651.07" y="97.7"></rect><ellipse cx="744.1037" cy="113.7" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M747.0724,119.3406 Q746.4943,119.6375 745.8537,119.7781 Q745.2131,119.9344 744.5099,119.9344 Q742.0099,119.9344 740.6818,118.2938 Q739.3693,116.6375 739.3693,113.5125 Q739.3693,110.3875 740.6818,108.7313 Q742.0099,107.075 744.5099,107.075 Q745.2131,107.075 745.8537,107.2313 Q746.5099,107.3875 747.0724,107.6844 L747.0724,110.4031 Q746.4474,109.825 745.8537,109.5594 Q745.2599,109.2781 744.6349,109.2781 Q743.2912,109.2781 742.6037,110.3563 Q741.9162,111.4188 741.9162,113.5125 Q741.9162,115.6063 742.6037,116.6844 Q743.2912,117.7469 744.6349,117.7469 Q745.2599,117.7469 745.8537,117.4813 Q746.4474,117.2 747.0724,116.6219 L747.0724,119.3406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.8457" x="764.6037" y="118.5467">PoolConcrete</text><line style="stroke:#181818;stroke-width:0.5;" x1="652.07" x2="937.4831" y1="129.7" y2="129.7"></line><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="659.07" y="140.3484"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="261.4131" x="671.07" y="146.6951">PooledObjectFactoryInterface factory</text><line style="stroke:#181818;stroke-width:0.5;" x1="652.07" x2="937.4831" y1="153.9969" y2="153.9969"></line><ellipse cx="662.07" cy="167.6453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.9814" x="671.07" y="170.992">acquire(): Object</text><ellipse cx="662.07" cy="183.9422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146.6719" x="671.07" y="187.2889">release(Object): void</text></g><!--class ObjectFactoryConcrete--><g id="elem_ObjectFactoryConcrete"><rect codeline="17" fill="#F1F1F1" height="64.2969" id="ObjectFactoryConcrete" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193.4033" x="396.66" y="7"></rect><ellipse cx="411.66" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M414.6288,28.6406 Q414.0506,28.9375 413.41,29.0781 Q412.7694,29.2344 412.0663,29.2344 Q409.5663,29.2344 408.2381,27.5938 Q406.9256,25.9375 406.9256,22.8125 Q406.9256,19.6875 408.2381,18.0313 Q409.5663,16.375 412.0663,16.375 Q412.7694,16.375 413.41,16.5313 Q414.0663,16.6875 414.6288,16.9844 L414.6288,19.7031 Q414.0038,19.125 413.41,18.8594 Q412.8163,18.5781 412.1913,18.5781 Q410.8475,18.5781 410.16,19.6563 Q409.4725,20.7188 409.4725,22.8125 Q409.4725,24.9063 410.16,25.9844 Q410.8475,27.0469 412.1913,27.0469 Q412.8163,27.0469 413.41,26.7813 Q414.0038,26.5 414.6288,25.9219 L414.6288,28.6406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161.4033" x="425.66" y="27.8467">ObjectFactoryConcrete</text><line style="stroke:#181818;stroke-width:0.5;" x1="397.66" x2="589.0633" y1="39" y2="39"></line><line style="stroke:#181818;stroke-width:0.5;" x1="397.66" x2="589.0633" y1="47" y2="47"></line><ellipse cx="407.66" cy="60.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156.0303" x="416.66" y="63.9951">createObject(): Object</text></g><!--class Client--><g id="elem_Client"><rect codeline="21" fill="#F1F1F1" height="80.5938" id="Client" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="152.499" x="50.58" y="105.85"></rect><ellipse cx="102.3144" cy="121.85" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M105.2831,127.4906 Q104.705,127.7875 104.0644,127.9281 Q103.4238,128.0844 102.7206,128.0844 Q100.2206,128.0844 98.8925,126.4438 Q97.58,124.7875 97.58,121.6625 Q97.58,118.5375 98.8925,116.8813 Q100.2206,115.225 102.7206,115.225 Q103.4238,115.225 104.0644,115.3813 Q104.7206,115.5375 105.2831,115.8344 L105.2831,118.5531 Q104.6581,117.975 104.0644,117.7094 Q103.4706,117.4281 102.8456,117.4281 Q101.5019,117.4281 100.8144,118.5063 Q100.1269,119.5688 100.1269,121.6625 Q100.1269,123.7563 100.8144,124.8344 Q101.5019,125.8969 102.8456,125.8969 Q103.4706,125.8969 104.0644,125.6313 Q104.6581,125.35 105.2831,124.7719 L105.2831,127.4906 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="122.8144" y="126.6967">Client</text><line style="stroke:#181818;stroke-width:0.5;" x1="51.58" x2="202.079" y1="137.85" y2="137.85"></line><rect fill="#FFFFFF" fill-opacity="0.00000" height="6" style="stroke:#C82930;stroke-width:1;" width="6" x="58.58" y="148.4984"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.499" x="70.58" y="154.8451">PoolInterface pool</text><line style="stroke:#181818;stroke-width:0.5;" x1="51.58" x2="202.079" y1="162.1469" y2="162.1469"></line><ellipse cx="61.58" cy="175.7953" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1;"></ellipse><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.9609" x="70.58" y="179.142">usePool(): void</text></g><!--class ObjectFactoryInterface--><g id="elem_ObjectFactoryInterface"><rect fill="#F1F1F1" height="48" id="ObjectFactoryInterface" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="192.6992" x="1029.48" y="122.14"></rect><ellipse cx="1044.48" cy="138.14" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M1047.4488,143.7806 Q1046.8706,144.0775 1046.23,144.2181 Q1045.5894,144.3744 1044.8863,144.3744 Q1042.3863,144.3744 1041.0581,142.7338 Q1039.7456,141.0775 1039.7456,137.9525 Q1039.7456,134.8275 1041.0581,133.1713 Q1042.3863,131.515 1044.8863,131.515 Q1045.5894,131.515 1046.23,131.6713 Q1046.8863,131.8275 1047.4488,132.1244 L1047.4488,134.8431 Q1046.8238,134.265 1046.23,133.9994 Q1045.6363,133.7181 1045.0113,133.7181 Q1043.6675,133.7181 1042.98,134.7963 Q1042.2925,135.8588 1042.2925,137.9525 Q1042.2925,140.0463 1042.98,141.1244 Q1043.6675,142.1869 1045.0113,142.1869 Q1045.6363,142.1869 1046.23,141.9213 Q1046.8238,141.64 1047.4488,141.0619 L1047.4488,143.7806 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.6992" x="1058.48" y="142.9867">ObjectFactoryInterface</text><line style="stroke:#181818;stroke-width:0.5;" x1="1030.48" x2="1221.1792" y1="154.14" y2="154.14"></line><line style="stroke:#181818;stroke-width:0.5;" x1="1030.48" x2="1221.1792" y1="162.14" y2="162.14"></line></g><!--reverse link PoolInterface to PoolConcrete--><g id="link_PoolInterface_PoolConcrete"><path d="M598.16,146.14 C620.19,146.14 626.5,146.14 650.58,146.14 " fill="#FFFFFF" fill-opacity="0.00000" id="PoolInterface-backto-PoolConcrete" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"></path><polygon fill="#FFFFFF" fill-opacity="0.00000" points="580.16,146.14,598.16,152.14,598.16,140.14,580.16,146.14" style="stroke:#181818;stroke-width:1;"></polygon></g><!--reverse link PooledObjectFactoryInterface to ObjectFactoryConcrete--><g id="link_PooledObjectFactoryInterface_ObjectFactoryConcrete"><path d="M264.94,39.14 C313.34,39.14 350.51,39.14 396.27,39.14 " fill="#FFFFFF" fill-opacity="0.00000" id="PooledObjectFactoryInterface-backto-ObjectFactoryConcrete" style="stroke:#181818;stroke-width:1;stroke-dasharray:7.0,7.0;"></path><polygon fill="#FFFFFF" fill-opacity="0.00000" points="246.94,39.14,264.94,45.14,264.94,33.14,246.94,39.14" style="stroke:#181818;stroke-width:1;"></polygon></g><!--link PoolConcrete to ObjectFactoryInterface--><g id="link_PoolConcrete_ObjectFactoryInterface"><path codeline="26" d="M938.67,146.14 C969.36,146.14 995.09,146.14 1023.46,146.14 " fill="#FFFFFF" fill-opacity="0.00000" id="PoolConcrete-to-ObjectFactoryInterface" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="1029.46,146.14,1020.46,142.14,1024.46,146.14,1020.46,150.14,1029.46,146.14" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29.7832" x="969.48" y="142.2069">uses</text></g><!--link Client to PoolInterface--><g id="link_Client_PoolInterface"><path codeline="27" d="M203.36,146.14 C262.59,146.14 339.03,146.14 400.71,146.14 " fill="#FFFFFF" fill-opacity="0.00000" id="Client-to-PoolInterface" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="406.71,146.14,397.71,142.14,401.71,146.14,397.71,150.14,406.71,146.14" style="stroke:#181818;stroke-width:1;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.9878" x="277.66" y="142.2069">interacts with</text></g><!--SRC=[fP4n3i8m34NtdC9Z4Ue5Eh1KGcA2AuJKfK5f0uaBGeYxupOLD40P85lix_U_4uCb0LbmUbSH5DgX8cqReHj2Lqg5iB7Mh1wtgm0-Sv3gsB8ucMMmtkvvQAWxD2Wz9g78tPFLXRY95o0MGR2KYgoxlFELGqaOH2CJ1YaZlUyXkMrOHWYwFXYiiI7_CMtwtR8CXLyN2taYzbImlxVEZMPOjDOJSk3Rm6azThra53Dwi3HTm4IKh1lsOd3gXB5B1lrFyfY7iwRg3W00]--></g></svg></p><p><img src="./images/Estrutura.png" alt="Texto alternativo"></p>
<h2 id="participantes">Participantes </h2>
<ul>
<li><strong>PoolInterface</strong>
<ul>
<li>Define uma interface comum para todas as implementações de classes de pool de objetos</li>
</ul>
</li>
<li><strong>ObjectFactoryInterface</strong>
<ul>
<li>Define uma interface comum para todas as implementações de classes fabricas de objetos que seram guardadas em pool.</li>
</ul>
</li>
<li><strong>Client</strong>
<ul>
<li>Aquele que necessita das instancias do objeto que sera guardado em pool.</li>
</ul>
</li>
</ul>
<h2 id="implementação">Implementação </h2>
<ul>
<li>Implementação de um pool</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code><span class="token keyword keyword-package">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>implementations<span class="token punctuation">.</span>simple</span><span class="token punctuation">;</span>

<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>interfaces<span class="token punctuation">.</span></span><span class="token class-name">PoolInterface</span></span><span class="token punctuation">;</span>
<span class="token keyword keyword-import">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>interfaces<span class="token punctuation">.</span></span><span class="token class-name">PooledObjectFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">SimplePool</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword keyword-implements">implements</span> <span class="token class-name">PoolInterface</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> instanciasLivres<span class="token punctuation">;</span> 
    <span class="token keyword keyword-private">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> instanciasEmUso<span class="token punctuation">;</span>  
    <span class="token keyword keyword-private">private</span> <span class="token class-name">PooledObjectFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> factory<span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token class-name">SimplePool</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> size<span class="token punctuation">,</span> <span class="token class-name">PooledObjectFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>factory <span class="token operator">=</span> factory<span class="token punctuation">;</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>instanciasLivres <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>instanciasEmUso <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instanciasLivres<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>factory<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">T</span> <span class="token function">acquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instanciasLivres<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">T</span> instance <span class="token operator">=</span> instanciasLivres<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            instanciasEmUso<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token keyword keyword-return">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">release</span><span class="token punctuation">(</span><span class="token class-name">T</span> instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>instanciasEmUso<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instanciasLivres<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-void">void</span> <span class="token function">destroyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token class-name">T</span> instance <span class="token operator">:</span> instanciasLivres<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            factory<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token class-name">T</span> instance <span class="token operator">:</span> instanciasEmUso<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            factory<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="exemplo-de-código">Exemplo de código </h2>
<ul>
<li>Uso de um pool</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code><span class="token class-name">PoolInterface</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CheapObject</span><span class="token punctuation">&gt;</span></span> pool <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">SimplePool</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CheapObject</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">CheapObjectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">CheapObject</span> cheapObject <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">acquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cheapObject<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pool<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>cheapObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre><h2 id="usos-conhecidos">Usos conhecidos </h2>
<ul>
<li>
<p>Conexões com bancos de dados geralmente são gerenciados por um object pool</p>
</li>
<li>
<p>Servidores web e de aplicação implementam um pool de threads para o processamento de requisições</p>
</li>
<li>
<p>Em aplicações multithreads, threads de trabalho são gerenciadas por um object pool</p>
</li>
</ul>
<h2 id="padrão-relacionados">Padrão relacionados </h2>
<h2 id="referências">Referências </h2>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>